<template>
 
    <form >
        <div>
            <label>名称</label>
            <input type="text" v-model="form.title"/>
        </div>
         <div>
            <label>详情</label>
            <input type="text"  v-model="form.description"/>
        </div>
        <button @click.prevent="addGoal">添加</button>
        <router-link to="/addForm/1">目标1</router-link>
    </form>
      <form >
        <div>
            <label>名称</label>
            <input type="text" v-model="form.title"/>
        </div>
         <div>
            <label>详情</label>
            <input type="text"  v-model="form.description"/>
        </div>
        <button @click.prevent="addGoal">添加</button>
        <router-link to="/addForm/1">目标1</router-link>
    </form>
      <form >
        <div>
            <label>名称</label>
            <input type="text" v-model="form.title"/>
        </div>
         <div>
            <label>详情</label>
            <input type="text"  v-model="form.description"/>
        </div>
        <button @click.prevent="addGoal">添加</button>
        <router-link to="/addForm/1">目标1</router-link>
    </form>
      <form >
        <div>
            <label>名称</label>
            <input type="text" v-model="form.title"/>
        </div>
         <div>
            <label>详情</label>
            <input type="text"  v-model="form.description"/>
        </div>
        <button @click.prevent="addGoal">添加</button>
        <router-link to="/addForm/1">目标1</router-link>
    </form>  <form >
        <div>
            <label>名称</label>
            <input type="text" v-model="form.title"/>
        </div>
         <div>
            <label>详情</label>
            <input type="text"  v-model="form.description"/>
        </div>
        <button @click.prevent="addGoal">添加</button>
        <router-link to="/addForm/1">目标1</router-link>
    </form>  <form >
        <div>
            <label>名称</label>
            <input type="text" v-model="form.title"/>
        </div>
         <div>
            <label>详情</label>
            <input type="text"  v-model="form.description"/>
        </div>
        <button @click.prevent="addGoal">添加</button>
        <router-link to="/addForm/1">目标1</router-link>
    </form>  <form >
        <div>
            <label>名称</label>
            <input type="text" v-model="form.title"/>
        </div>
         <div>
            <label>详情</label>
            <input type="text"  v-model="form.description"/>
        </div>
        <button @click.prevent="addGoal">添加</button>
        <router-link to="/addForm/1">目标1</router-link>
    </form>  <form >
        <div>
            <label>名称</label>
            <input type="text" v-model="form.title"/>
        </div>
         <div>
            <label>详情</label>
            <input type="text"  v-model="form.description"/>
        </div>
        <button @click.prevent="addGoal">添加</button>
        <router-link to="/addForm/1">目标1</router-link>
    </form>  <form >
        <div>
            <label>名称</label>
            <input type="text" v-model="form.title"/>
        </div>
         <div>
            <label>详情</label>
            <input type="text"  v-model="form.description"/>
        </div>
        <button @click.prevent="addGoal">添加</button>
        <router-link to="/addForm/1">目标1</router-link>
    </form>  <form >
        <div>
            <label>名称</label>
            <input type="text" v-model="form.title"/>
        </div>
         <div>
            <label>详情</label>
            <input type="text"  v-model="form.description"/>
        </div>
        <button @click.prevent="addGoal">添加</button>
        <router-link to="/addForm/1">目标1</router-link>
    </form>
      <form >
        <div>
            <label>名称</label>
            <input type="text" v-model="form.title"/>
        </div>
         <div>
            <label>详情</label>
            <input type="text"  v-model="form.description"/>
        </div>
        <button @click.prevent="addGoal">添加</button>
        <router-link to="/addForm/1">目标1</router-link>
    </form>
      <form >
        <div>
            <label>名称</label>
            <input type="text" v-model="form.title"/>
        </div>
         <div>
            <label>详情</label>
            <input type="text"  v-model="form.description"/>
        </div>
        <button @click.prevent="addGoal">添加</button>
        <router-link to="/addForm/1">目标1</router-link>
    </form>
      <form >
        <div>
            <label>名称</label>
            <input type="text" v-model="form.title"/>
        </div>
         <div>
            <label>详情</label>
            <input type="text"  v-model="form.description"/>
        </div>
        <button @click.prevent="addGoal">添加</button>
        <router-link to="/addForm/1">目标1</router-link>
    </form>
      <form >
        <div>
            <label>名称</label>
            <input type="text" v-model="form.title"/>
        </div>
         <div>
            <label>详情</label>
            <input type="text"  v-model="form.description"/>
        </div>
        <button @click.prevent="addGoal">添加</button>
        <router-link to="/addForm/1">目标1</router-link>
    </form>  <form >
        <div>
            <label>名称</label>
            <input type="text" v-model="form.title"/>
        </div>
         <div>
            <label>详情</label>
            <input type="text"  v-model="form.description"/>
        </div>
        <button @click.prevent="addGoal">添加</button>
        <router-link to="/addForm/1">目标1</router-link>
    </form>  <form >
        <div>
            <label>名称</label>
            <input type="text" v-model="form.title"/>
        </div>
         <div>
            <label>详情</label>
            <input type="text"  v-model="form.description"/>
        </div>
        <button @click.prevent="addGoal">添加</button>
        <router-link to="/addForm/1">目标1</router-link>
    </form>  <form >
        <div>
            <label>名称</label>
            <input type="text" v-model="form.title"/>
        </div>
         <div>
            <label>详情</label>
            <input type="text"  v-model="form.description"/>
        </div>
        <button @click.prevent="addGoal">添加</button>
        <router-link to="/addForm/1">目标1</router-link>
    </form>  <form >
        <div>
            <label>名称</label>
            <input type="text" v-model="form.title"/>
        </div>
         <div>
            <label>详情</label>
            <input type="text"  v-model="form.description"/>
        </div>
        <button @click.prevent="addGoal">添加</button>
        <router-link to="/addForm/1">目标1</router-link>
    </form>  <form >
        <div>
            <label>名称</label>
            <input type="text" v-model="form.title"/>
        </div>
         <div>
            <label>详情</label>
            <input type="text"  v-model="form.description"/>
        </div>
        <button @click.prevent="addGoal">添加</button>
        <router-link to="/addForm/1">目标1</router-link>
    </form>  <form >
        <div>
            <label>名称</label>
            <input type="text" v-model="form.title"/>
        </div>
         <div>
            <label>详情</label>
            <input type="text"  v-model="form.description"/>
        </div>
        <button @click.prevent="addGoal">添加</button>
        <router-link to="/addForm/1">目标1</router-link>
    </form>
</template>

<script>
export default {
   name: 'AddGoal',
   inject: ['goals'],
   props: ['id'],
   emits: ['change-detail', 'add-goal'],
   data(){
    return{
        form:{
            title: '',
        description: ''
        }
    }
   },
   methods:{
    loadGoal(){
        const goalId = this.id;
        if(goalId == 0){
            return;
        }
        this.form = this.goals.find(goal => goal.id == goalId)
    },
    addGoal(){
        console.log('add goal!')
        this.$emit('add-goal', this.title, this.description)
        this.$router.push('/toDoList')
    }
   },
    mounted(){
        this.loadGoal()
    },
    beforeRouteEnter(){
        console.log('beforeRouteEnter')
    },
    beforeRouteUpdate(){
console.log('beforeRouteUpdate')
    },
    watch:{
        $route(){
            this.loadGoal()
        }
    }
}
</script>

<style scoped>

</style>
